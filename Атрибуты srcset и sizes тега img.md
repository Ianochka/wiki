# Атрибуты srcset и sizes тега img

Created: July 11, 2021 2:18 PM

Атрибут относится к тегу img и нужен для того, чтобы браузер самостоятельно подбирал размер картинки под ширину экрана устройства.

В качестве ширины экрана в css-пикселях используется произведение ширины области просмотра и pixel ratio - соотношение пикселей. Большинство смартфонов имеет pixel ratio 2-4, десктопный экран имеет pixel ratio 1.

После определение ширины в css-пикселях браузер ищет наиболее подходящую картинку из предложенных в srcset. Если идеально подходящего нет, браузер отобразит первое изображение, которое больше необходимого размера.

Для корректной работы атрибута srcset необходим еще один атрибут - sizes. Если он не заполнен, то по умолчанию используется значение 100vw. Это может привести к проблемам в верстке. Например, мы загружаем страницу с шириной экрана 1920px и хотим, чтобы на ней отобразилось изображение шириной 1080px, но значение sizes забыли указать. Тогда браузер полагает, что картинка должна занимать 1920px в ширину, и надо отображает самую большую иллюстрацию из массива srcset.

Атрибут sizes для этого примера будет выглядеть так: sizes="(max-width: 1080px) 100vw, 1080px". Первая часть (до запятой) - для экранов с шириной в css-пикселях меньше или равных 1080 пикселей, на них картинка будет занимать всю ширину экрана. Вторая часть - для экранов шириной 1081 пиксель и больше, на них картинка всегда будет шириной 1080 пикселей. 

Еще один пример: sizes="((min-width: 600px) and (max-width: 1004px)) 84vw, (min-width: 1005px) 60vw, 100vw". Здесь описан размер картинки на трех диапазонах ширины экранов. На экране шириной от 600 до 1004 пикселей картинка будет занимать 84% экрана, на экранах шириной от 1005 пикселей - 60%, а на экранах меньше 600 пикселей - все 100% ширины экрана.

Если нужно добавить отступ, то удобнее будет использовать инструмент calc:

sizes="(max-width: 360px) calc(100vw - 40px), 
            (max-width: 767px) calc(100vw - 60px), 
            (max-width: 1023px) calc(100vw - 208px)"

Так как браузер последовательно проверяет все условия, мы можем выстроить их по возрастанию max-width.